"use strict";(self.webpackChunkEmployeeExpenseCalculator=self.webpackChunkEmployeeExpenseCalculator||[]).push([[390],{9390:(U,d,n)=>{n.r(d),n.d(d,{DepartmentFormComponent:()=>T});var e=n(5879),p=n(6814),r=n(95),E=n(9845),f=n(5455),c=n(2962),g=n(2840),u=n(824),m=n(3599),_=n(5094),M=n(6691),z=n(4041),v=n(855),C=n(1958),h=n(2920);function O(o,i){if(1&o&&e._UZ(0,"nz-option",13),2&o){const s=i.$implicit;e.Q6J("nzLabel",s.name)("nzValue",s.id)("nzDisabled",s.disabled)}}function P(o,i){1&o&&e._uU(0),2&o&&e.hij("and ",i.$implicit.length," more selected")}const D=function(){return{xs:8,sm:16,md:24,lg:32}};let T=(()=>{var o;class i{constructor(t,a,l){this.fb=t,this.router=a,this.route=l,this.service=(0,e.f3M)(E.n),this.employeeService=(0,e.f3M)(f.G),this.msg=(0,e.f3M)(M.dD),this.departmentForm=this.fb.nonNullable.group({id:[crypto.randomUUID(),r.kI.required],name:[null,[r.kI.required]],children:[[],[r.kI.required]]}),this.employeeList=[],this.action=0,this.navigateUrl="/page/department",this.getEmployeeList()}ngOnInit(){const t=this.route.snapshot.params.id;t&&this.getDepartmentDetails(t)}getEmployeeList(){this.employeeService.read().subscribe(t=>this.employeeList=t)}getDepartmentDetails(t){this.service.readById(t).subscribe(a=>{this.action=1,this.departmentForm.patchValue(a)})}onCancel(){this.router.navigate([this.navigateUrl])}onSubmit(){this.departmentForm.valid?0===this.action?this.createDepartment():this.updateDepartment():this.markFormAsDirty()}createDepartment(){this.service.create(this.departmentForm.getRawValue()).subscribe({next:t=>{t.isSuccess?(this.msg.success(t.msg),this.router.navigate([this.navigateUrl])):this.msg.warning(t.msg)},error:t=>{this.msg.error(t?.error?.message||"Something went wrong")}})}updateDepartment(){this.service.create(this.departmentForm.getRawValue()).subscribe({next:t=>{t.isSuccess?(this.msg.success(t.msg),this.router.navigate([this.navigateUrl])):this.msg.warning(t.msg)},error:t=>{this.msg.error(t?.error?.message||"Something went wrong")}})}markFormAsDirty(){Object.values(this.departmentForm.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}}return(o=i).\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(z.F0),e.Y36(z.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-department-form"]],standalone:!0,features:[e.jDz],decls:26,vars:18,consts:[[3,"nzBordered","nzTitle"],["nz-form","",3,"formGroup","ngSubmit"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzMd","12","nzXl","8","nzXXl","6"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nzErrorTip","Mandatory Field",3,"nzSm","nzXs"],["nz-input","","formControlName","name","id","name"],["nzRequired","","nzFor","children",3,"nzSm","nzXs"],["nzMode","multiple","nzPlaceHolder","Please select","formControlName","children",3,"nzMaxTagCount","nzMaxTagPlaceholder"],[3,"nzLabel","nzValue","nzDisabled",4,"ngFor","ngForOf"],["tagPlaceHolder",""],["nz-button","","nzType","primary"],["nz-button","",3,"click"],[3,"nzLabel","nzValue","nzDisabled"]],template:function(t,a){if(1&t&&(e.TgZ(0,"nz-card",0)(1,"form",1),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.TgZ(2,"div",2)(3,"div",3)(4,"nz-form-item")(5,"nz-form-label",4),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"nz-form-control",5),e._UZ(8,"input",6),e.qZA()()(),e.TgZ(9,"div",3)(10,"nz-form-item")(11,"nz-form-label",7),e._uU(12,"Members"),e.qZA(),e.TgZ(13,"nz-form-control",5)(14,"nz-select",8),e.YNc(15,O,1,3,"nz-option",9),e.qZA(),e.YNc(16,P,1,1,"ng-template",null,10,e.W1O),e.qZA()()()(),e.TgZ(18,"div",2)(19,"div",3)(20,"nz-form-item")(21,"nz-form-control")(22,"button",11),e._uU(23,"Submit"),e.qZA(),e.TgZ(24,"button",12),e.NdJ("click",function(){return a.onCancel()}),e._uU(25,"Cancel"),e.qZA()()()()()()()),2&t){const l=e.MAs(17);e.Q6J("nzBordered",!1)("nzTitle",1===a.action?"Edit Department":"Add Department"),e.xp6(1),e.Q6J("formGroup",a.departmentForm),e.xp6(1),e.Q6J("nzGutter",e.DdM(16,D)),e.xp6(3),e.Q6J("nzSm",8)("nzXs",24),e.xp6(2),e.Q6J("nzSm",14)("nzXs",24),e.xp6(4),e.Q6J("nzSm",8)("nzXs",24),e.xp6(2),e.Q6J("nzSm",14)("nzXs",24),e.xp6(1),e.Q6J("nzMaxTagCount",3)("nzMaxTagPlaceholder",l),e.xp6(1),e.Q6J("ngForOf",a.employeeList),e.xp6(3),e.Q6J("nzGutter",e.DdM(17,D))}},dependencies:[p.ez,p.sg,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,c.vh,c.bd,g.sL,g.ix,v.w,C.dQ,m.U5,h.t3,h.SK,m.Lr,m.Nx,m.iK,m.Fd,u.o7,u.Zp,_.LV,_.Ip,_.Vq],styles:["[nz-button][_ngcontent-%COMP%]{margin-right:8px;margin-bottom:12px}"]}),i})()}}]);